<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Computing concept similarity using ConceptNet word embeddings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
        <div class="quarto-navbar-tools tools-end">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/sarkadava/FLESH_Effort">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/sarkadava/FLESH_Effort/issues">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../06_ConceptSimilarity/ConceptNet_similarity.html">Analysis</a></li><li class="breadcrumb-item"><a href="../06_ConceptSimilarity/ConceptNet_similarity.html">Computing concept similarity using ConceptNet word embeddings</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview of Methods</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Processing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01_XDF_processing/xdf_workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pre-Processing I: from XDF to raw files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_MotionTracking_processing/01_Video_preparation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motion tracking I: Preparation of videos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_MotionTracking_processing/02_Track_OpenPose.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motion tracking II: 2D pose estimation via OpenPose</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_MotionTracking_processing/03_Track_pose2sim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motion tracking III: Triangulation via Pose2sim</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_MotionTracking_processing/04_Track_InverseKinDyn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Motion tracking IV: Modeling inverse kinematics and dynamics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03_TS_processing/01_TS_processing_motion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing I: Motion tracking and balance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03_TS_processing/02_TS_processing_acoustics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing II: Acoustics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03_TS_processing/03_TS_merging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing III: Merging multimodal data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Time Series Annotation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_TS_movementAnnotation/01_Classify_preparation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Movement annotation I: Preparing training data and data for classifier</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_TS_movementAnnotation/02_MovementClassifier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Movement annotation II: Training movement classifier, and annotating timeseries data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_TS_movementAnnotation/03_InterAgreement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Movement annotation III: Computing interrater agreement between manual and automatic annotation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_finalMerge/TS_mergeAnnotations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final merge</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06_ConceptSimilarity/ConceptNet_similarity.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Computing concept similarity using ConceptNet word embeddings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_TS_featureExtraction/TS_extraction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extraction of effort-related features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Analysis_XGBoost/01_PCA_featureDimensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploratory Analysis I: Using PCA to identify effort dimensions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Analysis_XGBoost/02_XGBoost_effortIndicators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploratory Analysis II: Identifying effort-related features contributing to misunderstanding resolution via XGBoost</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09_Analysis_Modeling/Modelling_syntheticData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Analysis: Modelling the Effect of Communicative Attempt (H1) and Answer Similarity (H2) on Effort</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-conceptnet" id="toc-sec-conceptnet" class="nav-link active" data-scroll-target="#sec-conceptnet">Overview</a></li>
  <li><a href="#calculating-cosine-similarity" id="toc-calculating-cosine-similarity" class="nav-link" data-scroll-target="#calculating-cosine-similarity">Calculating cosine similarity</a></li>
  <li><a href="#comparing-cosine-similarity-against-perceived-similarity" id="toc-comparing-cosine-similarity-against-perceived-similarity" class="nav-link" data-scroll-target="#comparing-cosine-similarity-against-perceived-similarity">Comparing cosine similarity against perceived similarity</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../06_ConceptSimilarity/ConceptNet_similarity.html">Analysis</a></li><li class="breadcrumb-item"><a href="../06_ConceptSimilarity/ConceptNet_similarity.html">Computing concept similarity using ConceptNet word embeddings</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Computing concept similarity using ConceptNet word embeddings</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-conceptnet" class="level1">
<h1>Overview</h1>
<p>Our second hypothesis tests the effect of degree of misunderstanding on the magnitude of effort.</p>
<p>We operationalize degree of misunderstanding as a conceptual similarity between target concept and answer offered by a guesser.</p>
<p>To have a reproducible measure of conceptual similarity, we use the ConceptNet <span class="citation" data-cites="speer_etal18">(<a href="#ref-speer_etal18" role="doc-biblioref">Speer, Chin, and Havasi 2018</a>)</span> to extract embeddings for concepts used in our study, and calculate cosine similarity between the target concept and guessed answer.</p>
<p>To verify the utility of the cosine similarity, we have collected data from 14 Dutch-native people who were asked to rate the similarity between each pair of words in online anonymous rating study. We then compare the ‘perceived similarity’ with cosine similarity computed from ConceptNet embeddings, to validate the use of ConceptNet embeddings as a measure of conceptual similarity.</p>
<div id="ffe81d02" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code to load packages and prepare environment</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pingouin</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openpyxl</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>curfolder <span class="op">=</span> os.getcwd()</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>rawdata <span class="op">=</span> curfolder <span class="op">+</span> <span class="st">'</span><span class="ch">\\</span><span class="st">..</span><span class="ch">\\</span><span class="st">00_RAWDATA</span><span class="ch">\\</span><span class="st">'</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>answerfiles <span class="op">=</span> glob.glob(rawdata <span class="op">+</span> <span class="st">'*</span><span class="ch">\\</span><span class="st">*.csv'</span>, recursive<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>datafolder <span class="op">=</span> curfolder <span class="op">+</span> <span class="st">'</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">'</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all files that have '_1_results' in the name </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>answerfiles_1 <span class="op">=</span> [f <span class="cf">for</span> f <span class="kw">in</span> answerfiles <span class="cf">if</span> <span class="st">'_1_results'</span> <span class="kw">in</span> f]</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over list and add it into one big df</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>df_all1 <span class="op">=</span> pd.DataFrame()</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> answerfiles_1:</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="bu">file</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    df_all1 <span class="op">=</span> pd.concat([df_all1, df], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>df_all1[<span class="st">'exp'</span>] <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all files that have '_2_results' in the name</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>answerfiles_2 <span class="op">=</span> [f <span class="cf">for</span> f <span class="kw">in</span> answerfiles <span class="cf">if</span> <span class="st">'_2_results'</span> <span class="kw">in</span> f]</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over list and add it into one big df</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>df_all2 <span class="op">=</span> pd.DataFrame()</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> answerfiles_2:</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="bu">file</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    df_all2 <span class="op">=</span> pd.concat([df_all2, df], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>df_all2[<span class="st">'exp'</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>df_all <span class="op">=</span> pd.concat([df_all1, df_all2], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only columns word and answer</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df_all[[<span class="st">'word'</span>, <span class="st">'answer'</span>, <span class="st">'exp'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>First we need to do some data-wrangling to get all in the right format for the embedding extraction and comparison</p>
<div id="dbf07829" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concept list</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_concepts <span class="op">=</span> pd.read_excel(rawdata <span class="op">+</span> <span class="st">'/conceptlist_info.xlsx'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># in df_concepts, keep only English and Dutch</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>df_concepts <span class="op">=</span> df_concepts[[<span class="st">'English'</span>, <span class="st">'Dutch'</span>]]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># rename Dutch to word</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df_concepts <span class="op">=</span> df_concepts.rename(columns<span class="op">=</span>{<span class="st">'Dutch'</span>: <span class="st">'word'</span>})</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># merge df and df_concepts on word</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.merge(df, df_concepts, on<span class="op">=</span><span class="st">'word'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># show rows where English is NaN</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>df[df[<span class="st">'English'</span>].isnull()]</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># add translations manually for each (these are practice trials)</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'bloem'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'flower'</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'dansen'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to dance'</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'auto'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'car'</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'olifant'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'elephant'</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'comfortabel'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'comfortable'</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'bal'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'ball'</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'haasten'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to hurry'</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'gek'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'crazy'</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'snijden'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to cut'</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'koken'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to cook'</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'juichen'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to cheer'</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'zingen'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to sing'</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'glimlach'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'smile'</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'klok'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'clock'</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'fiets'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'bicycle'</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'vliegtuig'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'airplane'</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'geheim'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'secret'</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'telefoon'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'telephone'</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'zwaaien'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'to wave'</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'sneeuw'</span>, <span class="st">'English'</span>] <span class="op">=</span> <span class="st">'snow'</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co"># make a list of English answers</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>answers_en <span class="op">=</span> [<span class="st">'party'</span>, <span class="st">'to cheer'</span>, <span class="st">'tasty'</span>, <span class="st">'to shoot'</span>, <span class="st">'to breathe'</span>, <span class="st">'zombie'</span>, <span class="st">'bee'</span>, <span class="st">'sea'</span>, <span class="st">'dirty'</span>, <span class="st">'tasty'</span>, <span class="st">'car'</span>, <span class="st">'to eat'</span>, <span class="st">'to eat'</span>, <span class="st">'to blow'</span>, <span class="st">'hose'</span>, <span class="st">'hose'</span>, <span class="st">'to annoy'</span>, <span class="st">'to make noise'</span>, <span class="st">'to make noise'</span>, <span class="st">'to run away'</span>, <span class="st">'elephant'</span>, <span class="st">'to cry'</span>, <span class="st">'cold'</span>, <span class="st">'outfit'</span>, <span class="st">'silence'</span>, <span class="st">'to ski'</span>, <span class="st">'wrong'</span>, <span class="st">'to play basketball'</span>, <span class="st">'to search'</span>, <span class="st">'disturbed'</span>, <span class="st">'to run'</span>, <span class="st">'to lick'</span>, <span class="st">'to lift'</span>, <span class="st">'lightning'</span>, <span class="st">'to think'</span>, <span class="st">'to jump'</span>, <span class="st">'to fall'</span>, <span class="st">'to write'</span>, <span class="st">'to dance'</span>, <span class="st">'shoulder height'</span>, <span class="st">'horn'</span>, <span class="st">'dirty'</span>, <span class="st">'boring'</span>, <span class="st">'to drink'</span>, <span class="st">'strong'</span>, <span class="st">'elderly'</span>, <span class="st">'to mix'</span>, <span class="st">'fish'</span>, <span class="st">'fish'</span>, <span class="st">'dirty'</span>, <span class="st">'wrong'</span>, <span class="st">'smart'</span>, <span class="st">'to box'</span>, <span class="st">'to box'</span>, <span class="st">'dog'</span>, <span class="st">'to catch'</span>, <span class="st">'to cheer'</span>, <span class="st">'to sing'</span>, <span class="st">'pregnant'</span>, <span class="st">'hair'</span>, <span class="st">'to shower'</span>, <span class="st">'pain'</span>, <span class="st">'burnt'</span>, <span class="st">'hot'</span>, <span class="st">'I'</span>, <span class="st">'to chew'</span>, <span class="st">'bird'</span>, <span class="st">'airplane'</span>, <span class="st">'to fly'</span>, <span class="st">'to think'</span>, <span class="st">'to choose'</span>, <span class="st">'to doubt'</span>, <span class="st">'graffiti'</span>, <span class="st">'fireworks'</span>, <span class="st">'bomb'</span>, <span class="st">'to smile'</span>, <span class="st">'to laugh'</span>, <span class="st">'smile'</span>, <span class="st">'clock'</span>, <span class="st">'to wonder'</span>, <span class="st">'height'</span>, <span class="st">'big'</span>, <span class="st">'height'</span>, <span class="st">'space'</span>, <span class="st">'to misjudge'</span>, <span class="st">'to wait'</span>, <span class="st">'satisfied'</span>, <span class="st">'happy'</span>, <span class="st">'fish'</span>, <span class="st">'to smell'</span>, <span class="st">'wind'</span>, <span class="st">'pain'</span>, <span class="st">'to burn'</span>, <span class="st">'hot'</span>, <span class="st">'to cycle'</span>, <span class="st">'to fly'</span>, <span class="st">'airplane'</span>, <span class="st">'bird'</span>, <span class="st">'to crawl'</span>, <span class="st">'to drink'</span>, <span class="st">'waterfall'</span>, <span class="st">'water'</span>, <span class="st">'fire'</span>, <span class="st">'top'</span>, <span class="st">'good'</span>, <span class="st">'to hear'</span>, <span class="st">'to point'</span>, <span class="st">'distance'</span>, <span class="st">'there'</span>, <span class="st">'to whisper'</span>, <span class="st">'quiet'</span>, <span class="st">'to be silent'</span>, <span class="st">'telephone'</span>, <span class="st">'to blow'</span>, <span class="st">'to distribute'</span>, <span class="st">'to give'</span>, <span class="st">'cat'</span>, <span class="st">'to laugh'</span>, <span class="st">'tasty'</span>, <span class="st">'to eat'</span>, <span class="st">'yummy'</span>, <span class="st">'to sleep'</span>, <span class="st">'mountain'</span>, <span class="st">'dirty'</span>, <span class="st">'to vomit'</span>, <span class="st">'to be disgusted'</span>, <span class="st">'to greet'</span>, <span class="st">'hello'</span>, <span class="st">'goodbye'</span>, <span class="st">'to smell'</span>, <span class="st">'nose'</span>, <span class="st">'odor'</span>, <span class="st">'to fly'</span>, <span class="st">'fireworks'</span>, <span class="st">'to blow'</span>, <span class="st">'to cut'</span>, <span class="st">'pain'</span>, <span class="st">'hot'</span>, <span class="st">'to slurp'</span>, <span class="st">'to throw'</span>, <span class="st">'to fall'</span>, <span class="st">'to fall'</span>, <span class="st">'whistle'</span>, <span class="st">'heartbeat'</span>, <span class="st">'mouse'</span>, <span class="st">'to hit'</span>, <span class="st">'to catch'</span>, <span class="st">'to grab'</span>, <span class="st">'to throw'</span>, <span class="st">'to fall'</span>, <span class="st">'to shoot'</span>, <span class="st">'circus'</span>, <span class="st">'trunk'</span>, <span class="st">'to fall'</span>, <span class="st">'to fight'</span>, <span class="st">'pain'</span>, <span class="st">'to push open'</span>, <span class="st">'to growl'</span>, <span class="st">'to cut'</span>, <span class="st">'to eat'</span>, <span class="st">'knife'</span>, <span class="st">'to slurp'</span>, <span class="st">'to drink'</span>, <span class="st">'drink'</span>, <span class="st">'to eat'</span>, <span class="st">'delicious'</span>, <span class="st">'tasty'</span>, <span class="st">'to cough'</span>, <span class="st">'sick'</span>, <span class="st">'to cry'</span>, <span class="st">'to cry'</span>]</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="co"># replace skien with skiën in the df</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'answer'</span>] <span class="op">=</span> df[<span class="st">'answer'</span>].<span class="bu">str</span>.replace(<span class="st">'skien'</span>, <span class="st">'skiën'</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of English 'to beat'</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df[df[<span class="st">'English'</span>] <span class="op">!=</span> <span class="st">'to beat'</span>]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co"># and to weep</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df[df[<span class="st">'English'</span>] <span class="op">!=</span> <span class="st">'to weep'</span>]</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co"># and noisy</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df[df[<span class="st">'English'</span>] <span class="op">!=</span> <span class="st">'noisy'</span>]</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="co"># add those to df as answers_en</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'answer_en'</span>] <span class="op">=</span> answers_en</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="co"># make a list of English targets</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>meanings_en <span class="op">=</span> <span class="bu">list</span>(df[<span class="st">'English'</span>])</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Dutch targets</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>meanings_nl <span class="op">=</span> <span class="bu">list</span>(df[<span class="st">'word'</span>])</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Dutch answers</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>answers_nl <span class="op">=</span> <span class="bu">list</span>(df[<span class="st">'answer'</span>])</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Save it</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>df.to_csv(datafolder <span class="op">+</span> <span class="st">'concept_answer_withoutcossim.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is how the dataframe looks like</p>
<div id="1e16ea1d" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">word</th>
<th data-quarto-table-cell-role="th">answer</th>
<th data-quarto-table-cell-role="th">exp</th>
<th data-quarto-table-cell-role="th">English</th>
<th data-quarto-table-cell-role="th">answer_en</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>bloem</td>
<td>feest</td>
<td>1</td>
<td>flower</td>
<td>party</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>dansen</td>
<td>juichen</td>
<td>1</td>
<td>to dance</td>
<td>to cheer</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>bitter</td>
<td>lekker</td>
<td>1</td>
<td>bitter</td>
<td>tasty</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>vechten</td>
<td>schieten</td>
<td>1</td>
<td>to fight</td>
<td>to shoot</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>ademen</td>
<td>ademen</td>
<td>1</td>
<td>to breathe</td>
<td>to breathe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>bijten</td>
<td>zombie</td>
<td>1</td>
<td>to bite</td>
<td>zombie</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>zoemen</td>
<td>bij</td>
<td>1</td>
<td>buzz</td>
<td>bee</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>fluisteren</td>
<td>zee</td>
<td>1</td>
<td>to whisper</td>
<td>sea</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>walgen</td>
<td>vies</td>
<td>1</td>
<td>disgusted</td>
<td>dirty</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>langzaam</td>
<td>lekker</td>
<td>1</td>
<td>slow</td>
<td>tasty</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>auto</td>
<td>auto</td>
<td>1</td>
<td>car</td>
<td>car</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>eten</td>
<td>eten</td>
<td>1</td>
<td>to eat</td>
<td>to eat</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>ei</td>
<td>eten</td>
<td>1</td>
<td>egg</td>
<td>to eat</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>zwemmen</td>
<td>waaien</td>
<td>1</td>
<td>to swim</td>
<td>to blow</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>snel</td>
<td>waterslang</td>
<td>1</td>
<td>fast</td>
<td>hose</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="calculating-cosine-similarity" class="level1">
<h1>Calculating cosine similarity</h1>
<p>Now we will load in <a href="https://github.com/commonsense/conceptnet-numberbatch">ConceptNet numberbatch (version 19.08)</a> and compute cosine similarity for each pair</p>
<div id="e4e4ce86" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Custom functions</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load embeddings from a file</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_embeddings(file_path):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    embeddings <span class="op">=</span> {}</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> f:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>            values <span class="op">=</span> line.split()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>            word <span class="op">=</span> values[<span class="dv">0</span>]</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>            vector <span class="op">=</span> np.array(values[<span class="dv">1</span>:], dtype<span class="op">=</span><span class="st">'float32'</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>            embeddings[word] <span class="op">=</span> vector</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> embeddings</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Cosine similarity</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cosine_similarity(vec1, vec2):</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    dot_product <span class="op">=</span> np.dot(vec1, vec2)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    norm_vec1 <span class="op">=</span> np.linalg.norm(vec1)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    norm_vec2 <span class="op">=</span> np.linalg.norm(vec2)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dot_product <span class="op">/</span> (norm_vec1 <span class="op">*</span> norm_vec2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We will use multilingual numberbatch to extract words in the original language of experiment - Dutch. While English has better representation in ConceptNet, the English numberbatch does not make distinction between nouns and verbs (so ‘a drink’ and ‘to drink’ have common representation - drink). Because this is important distinction for us, we opt for Dutch embeddings to avoid this problem</p>
<div id="fd091309" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load embeddings</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>embeddings <span class="op">=</span> load_embeddings(<span class="st">'numberbatch</span><span class="ch">\\</span><span class="st">numberbatch.txt'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is how a single concept is represented (here skiën, engl. skiing)</p>
<div id="6fe988f9" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>[ 3.410e-02 -4.640e-02  5.490e-02  1.544e-01  1.800e-02 -5.050e-02
 -6.660e-02 -2.300e-02  5.320e-02  1.104e-01  2.770e-02  5.040e-02
 -2.010e-02  5.900e-03 -1.133e-01 -9.370e-02 -7.890e-02  3.540e-02
  3.780e-02  8.400e-02 -3.880e-02  7.680e-02 -8.010e-02  6.540e-02
 -1.493e-01 -1.036e-01  8.490e-02  1.040e-02 -6.890e-02  6.890e-02
  1.226e-01 -1.850e-02  1.520e-02  2.810e-02 -5.660e-02 -2.670e-02
 -5.700e-02 -4.480e-02  1.924e-01  5.800e-02 -7.800e-02 -7.700e-03
  1.132e-01  6.350e-02 -4.310e-02  1.900e-03 -4.820e-02  1.047e-01
  6.900e-02  7.150e-02  1.660e-02  2.730e-02  4.340e-02  1.130e-02
 -1.427e-01 -9.200e-03 -8.000e-04  2.310e-02  1.234e-01 -1.452e-01
 -1.710e-02 -1.094e-01 -1.518e-01  4.820e-02  1.400e-02 -1.460e-02
  1.023e-01  5.220e-02  1.362e-01  3.190e-02 -2.590e-02  1.220e-01
  1.750e-02  8.810e-02 -9.200e-02 -1.226e-01 -5.560e-02 -6.600e-03
  3.180e-02 -1.113e-01  6.130e-02 -1.202e-01 -2.480e-02 -8.300e-03
 -1.710e-02  3.410e-02  1.550e-02 -8.000e-02 -6.390e-02  1.170e-01
 -1.578e-01  2.660e-02 -1.360e-02 -6.790e-02 -1.030e-02 -3.320e-02
  1.040e-02  1.600e-03 -1.300e-03 -4.420e-02  4.060e-02 -7.470e-02
 -2.800e-03  1.900e-02  1.098e-01 -6.180e-02 -5.690e-02  7.700e-02
 -2.000e-03 -1.050e-02 -9.610e-02  7.000e-03  5.310e-02  2.720e-02
  5.850e-02  5.000e-02  4.400e-03 -3.210e-02  3.000e-02 -6.020e-02
  1.190e-02  3.760e-02  3.650e-02  1.452e-01  1.900e-03  3.870e-02
  5.210e-02  4.470e-02  5.570e-02  1.460e-02 -8.330e-02 -3.660e-02
 -8.020e-02 -6.520e-02  3.660e-02  2.260e-02 -7.050e-02 -9.100e-03
  2.190e-02 -2.630e-02 -1.410e-02  6.200e-03 -2.130e-02 -3.750e-02
  1.960e-02 -1.250e-02  2.740e-02  8.450e-02 -8.750e-02 -2.700e-02
  8.500e-03  1.260e-02 -2.550e-02  1.640e-02  2.850e-02 -5.570e-02
 -1.110e-02  9.400e-02  3.280e-02 -4.830e-02  1.080e-02  1.170e-02
  8.600e-03  6.620e-02  1.151e-01  2.960e-02  1.670e-02  1.180e-02
 -1.101e-01 -5.720e-02 -2.910e-02 -2.450e-02 -3.700e-03 -4.650e-02
  7.500e-03 -4.350e-02 -3.150e-02 -4.980e-02 -3.750e-02  6.250e-02
  6.600e-03 -9.910e-02  3.180e-02 -4.350e-02 -2.830e-02 -9.260e-02
 -6.110e-02 -1.280e-02 -7.960e-02  3.280e-02  8.670e-02 -1.080e-02
 -1.430e-02  1.350e-02 -6.210e-02 -2.220e-02 -6.010e-02 -4.440e-02
  5.820e-02  9.090e-02  9.300e-03 -4.130e-02 -3.040e-02 -6.410e-02
  4.760e-02 -6.620e-02 -1.000e-04  5.300e-02 -3.650e-02  7.500e-03
  3.460e-02 -5.350e-02  8.900e-03 -9.140e-02 -2.830e-02 -4.290e-02
  9.000e-03 -7.400e-02  1.014e-01 -8.760e-02  3.200e-03 -4.420e-02
 -2.990e-02  1.000e-04  3.900e-02 -6.200e-03  7.740e-02  2.840e-02
  1.170e-02 -3.680e-02  2.790e-02  6.890e-02  1.800e-03  3.000e-03
 -3.070e-02 -5.000e-04  1.000e-03 -2.200e-03 -2.480e-02  1.117e-01
 -2.340e-02  3.780e-02  3.350e-02 -4.950e-02  9.500e-03  1.720e-02
  4.720e-02 -6.040e-02 -3.220e-02 -1.570e-02 -3.860e-02  1.140e-02
 -4.240e-02 -1.710e-02 -8.000e-04  3.900e-02  1.410e-02 -8.580e-02
 -3.250e-02 -1.650e-02 -2.520e-02  1.140e-02  7.050e-02  6.000e-04
  3.570e-02  4.750e-02 -7.050e-02  2.500e-02 -2.940e-02  1.830e-02
  9.600e-03  1.600e-02  3.910e-02  3.970e-02 -1.540e-02  8.070e-02
 -1.000e-02 -6.400e-03 -4.050e-02  3.030e-02 -6.060e-02  1.690e-02
  4.370e-02 -6.500e-03  2.920e-02 -2.900e-03 -1.017e-01  7.060e-02
 -1.053e-01 -1.500e-03  9.000e-03  9.500e-03  4.020e-02  2.420e-02
  1.800e-03  4.270e-02  3.140e-02 -2.540e-02  2.780e-02 -6.000e-03]</code></pre>
</div>
</div>
<p>Now we take the list of target-answer pairs, transform them into embedding format and perform cosine similarity.</p>
<div id="88a88d6b" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the embeddings for the words in the list meanings_en</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>word_embeddings_t <span class="op">=</span> {}</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> meanings_nl:</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    word_embed <span class="op">=</span> <span class="st">'/c/nl/'</span> <span class="op">+</span> word</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word_embed <span class="kw">in</span> embeddings:</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        word_embeddings_t[word] <span class="op">=</span> embeddings[word_embed]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get the embeddings for the words in the list answers_en</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>word_embeddings_ans <span class="op">=</span> {}</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> answers_nl:</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    word_embed <span class="op">=</span> <span class="st">'/c/nl/'</span> <span class="op">+</span> word</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word_embed <span class="kw">in</span> embeddings:</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        word_embeddings_ans[word] <span class="op">=</span> embeddings[word_embed]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the similarity between the first word in the list meanings_en and first word in answers_en, second word in meanings_en and second word in answers_en, etc.</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>cosine_similarities <span class="op">=</span> []</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(meanings_nl)):</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    word1 <span class="op">=</span> meanings_nl[i]</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    word2 <span class="op">=</span> answers_nl[i]</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    vec1 <span class="op">=</span> word_embeddings_t.get(word1)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    vec2 <span class="op">=</span> word_embeddings_ans.get(word2)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> vec1 <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span> <span class="kw">and</span> vec2 <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        cosine_sim <span class="op">=</span> cosine_similarity(vec1, vec2)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        cosine_similarities.append(cosine_sim)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print which concepts could not be found</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> vec1 <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Concept not found: </span><span class="sc">{</span>word1<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> vec2 <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Concept not found: </span><span class="sc">{</span>word2<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        cosine_similarities.append(<span class="va">None</span>)</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'cosine_similarity'</span>] <span class="op">=</span> cosine_similarities</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Save it</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>df.to_csv(datafolder <span class="op">+</span> <span class="st">'conceptnet_clean.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Concept not found: lawaai maken
Concept not found: lawaai maken
Concept not found: schouderhoogte
Concept not found: openduwen</code></pre>
</div>
</div>
<p>When running the code, we will see that some target or answered concepts are not represented in numberbatch (e.g., if the answer has more than one word).</p>
<p>Because we verified that cosine similarity and perceived similarity are highly correlated (see below), we will collect the missing data through new online rating study.</p>
</section>
<section id="comparing-cosine-similarity-against-perceived-similarity" class="level1">
<h1>Comparing cosine similarity against perceived similarity</h1>
<p>To validate the use of ConceptNet embeddings as a measure of conceptual similarity, we compare the cosine similarity computed from ConceptNet embeddings with the ‘perceived similarity’ ratings collected in the online anonymous rating study.</p>
<p>The rating study has been introduced to the participants in a way that closely relates to the experiment. The instructions go as follows:</p>
<p><em>Below is a list of 171 pairs of words. Your task is to go through them and rate on the scale from 0 to 10 how similar they are/feel for you. You can for example imagine that you are playing a game where you need to explain the first word from the pair (e.g., to dance), and someone answers the second word in the pair. In such a situation, how close is the guesser from the intended word? If they answer ‘to dance’, then the two words are completely identical. But if they answer ‘a car’ it is not similar at all. Rate it according to your intuition, there is no incorrect answer. Note that the survey is completely anonymous and we are not collecting any of your personal data, only the ratings.</em></p>
<p>This is how the survey results look like:</p>
<div id="b3be5c20" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">bloem - feest</th>
<th data-quarto-table-cell-role="th">dansen - juichen</th>
<th data-quarto-table-cell-role="th">bitter - lekker</th>
<th data-quarto-table-cell-role="th">vechten - schieten</th>
<th data-quarto-table-cell-role="th">ademen - ademen</th>
<th data-quarto-table-cell-role="th">bijten - zombie</th>
<th data-quarto-table-cell-role="th">zoemen - bij</th>
<th data-quarto-table-cell-role="th">fluisteren - zee</th>
<th data-quarto-table-cell-role="th">walgen - vies</th>
<th data-quarto-table-cell-role="th">langzaam - lekker</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">zout - mes</th>
<th data-quarto-table-cell-role="th">zuigen - slurpen</th>
<th data-quarto-table-cell-role="th">zuigen - drinken</th>
<th data-quarto-table-cell-role="th">zuigen - drink</th>
<th data-quarto-table-cell-role="th">dik - eten</th>
<th data-quarto-table-cell-role="th">dik - heerlijk</th>
<th data-quarto-table-cell-role="th">dik - lekker</th>
<th data-quarto-table-cell-role="th">ziek - hoesten</th>
<th data-quarto-table-cell-role="th">ziek - ziek</th>
<th data-quarto-table-cell-role="th">huilen - huilen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>7</td>
<td>10</td>
<td>5</td>
<td>8</td>
<td>1</td>
<td>8</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>8</td>
<td>6</td>
<td>5</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3</td>
<td>6</td>
<td>1</td>
<td>6</td>
<td>10</td>
<td>4</td>
<td>8</td>
<td>0</td>
<td>8</td>
<td>1</td>
<td>...</td>
<td>2</td>
<td>8</td>
<td>8</td>
<td>8</td>
<td>7</td>
<td>4</td>
<td>5</td>
<td>7</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>5</td>
<td>8</td>
<td>5</td>
<td>8</td>
<td>10</td>
<td>7</td>
<td>7</td>
<td>2</td>
<td>8</td>
<td>5</td>
<td>...</td>
<td>2</td>
<td>7</td>
<td>7</td>
<td>7</td>
<td>7</td>
<td>5</td>
<td>6</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>6</td>
<td>4</td>
<td>8</td>
<td>10</td>
<td>7</td>
<td>9</td>
<td>7</td>
<td>7</td>
<td>0</td>
<td>...</td>
<td>2</td>
<td>7</td>
<td>7</td>
<td>8</td>
<td>6</td>
<td>2</td>
<td>2</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>6</td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>10</td>
<td>7</td>
<td>8</td>
<td>0</td>
<td>6</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>7</td>
<td>8</td>
<td>7</td>
<td>4</td>
<td>0</td>
<td>0</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>0</td>
<td>4</td>
<td>2</td>
<td>3</td>
<td>10</td>
<td>6</td>
<td>5</td>
<td>2</td>
<td>8</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>4</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>10</td>
<td>4</td>
<td>8</td>
<td>0</td>
<td>9</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>8</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>7</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1</td>
<td>5</td>
<td>1</td>
<td>2</td>
<td>10</td>
<td>3</td>
<td>6</td>
<td>0</td>
<td>4</td>
<td>0</td>
<td>...</td>
<td>1</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>6</td>
<td>3</td>
<td>4</td>
<td>6</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>0</td>
<td>7</td>
<td>0</td>
<td>8</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>7</td>
<td>0</td>
<td>2</td>
<td>6</td>
<td>4</td>
<td>2</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>10</td>
<td>5</td>
<td>0</td>
<td>0</td>
<td>8</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>2</td>
<td>5</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>7</td>
<td>10</td>
<td>4</td>
<td>6</td>
<td>3</td>
<td>8</td>
<td>3</td>
<td>...</td>
<td>4</td>
<td>7</td>
<td>4</td>
<td>6</td>
<td>6</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>5</td>
<td>10</td>
<td>8</td>
<td>7</td>
<td>3</td>
<td>9</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>5</td>
<td>2</td>
<td>2</td>
<td>5</td>
<td>2</td>
<td>1</td>
<td>8</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>0</td>
<td>0</td>
<td>4</td>
<td>0</td>
<td>10</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>5</td>
<td>0</td>
<td>2</td>
<td>10</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>10</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>0</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>10</td>
<td>10</td>
</tr>
</tbody>
</table>

<p>14 rows × 166 columns</p>
</div>
</div>
</div>
</div>
<p><br> Now we have to calculate mean rating for each pair</p>
<div id="6f427a28" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for each column, calculate the mean and save it to a df</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df_survey_means <span class="op">=</span> pd.DataFrame(df_survey.mean()).reset_index()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># separate the index, the first part is English, the second part is the answer_en</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>df_survey_means[<span class="st">'word'</span>] <span class="op">=</span> df_survey_means[<span class="st">'index'</span>].<span class="bu">str</span>.split(<span class="st">' - '</span>).<span class="bu">str</span>[<span class="dv">0</span>]</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>df_survey_means[<span class="st">'answer'</span>] <span class="op">=</span> df_survey_means[<span class="st">'index'</span>].<span class="bu">str</span>.split(<span class="st">' - '</span>).<span class="bu">str</span>[<span class="dv">1</span>]</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of the index column</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>df_survey_means <span class="op">=</span> df_survey_means.drop(columns<span class="op">=</span><span class="st">'index'</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># rename the column 0 to mean_similarity</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>df_survey_means <span class="op">=</span> df_survey_means.rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">'mean_similarity'</span>})</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">##### some corrections ####</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of all invisible spaces in answer</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>df_survey_means[<span class="st">'answer'</span>] <span class="op">=</span> df_survey_means[<span class="st">'answer'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># where word is vangen and answer vagen, change answer to vangen, and add similarity to 10</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>df_survey_means.loc[(df_survey_means[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'vagen'</span>) <span class="op">&amp;</span> (df_survey_means[<span class="st">'answer'</span>] <span class="op">==</span> <span class="st">'vangen'</span>), <span class="st">'word'</span>] <span class="op">=</span> <span class="st">'vangen'</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>df_survey_means.loc[(df_survey_means[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'vangen'</span>) <span class="op">&amp;</span> (df_survey_means[<span class="st">'answer'</span>] <span class="op">==</span> <span class="st">'vangen'</span>), <span class="st">'mean_similarity'</span>] <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># where word is lopen and answer skien, change answer to skiën</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>df_survey_means.loc[(df_survey_means[<span class="st">'word'</span>] <span class="op">==</span> <span class="st">'lopen'</span>) <span class="op">&amp;</span> (df_survey_means[<span class="st">'answer'</span>] <span class="op">==</span> <span class="st">'skien'</span>), <span class="st">'answer'</span>] <span class="op">=</span> <span class="st">'skiën'</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># add one missing pair vallen-vallen with mean_similarity 10</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>missing_row <span class="op">=</span> pd.DataFrame({<span class="st">'word'</span>: [<span class="st">'vallen'</span>], <span class="st">'answer'</span>: [<span class="st">'vallen'</span>], <span class="st">'mean_similarity'</span>: [<span class="dv">10</span>]})</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>df_survey_means <span class="op">=</span> pd.concat([df_survey_means, missing_row], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>df_survey_means.head(<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean_similarity</th>
<th data-quarto-table-cell-role="th">word</th>
<th data-quarto-table-cell-role="th">answer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.785714</td>
<td>bloem</td>
<td>feest</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3.214286</td>
<td>dansen</td>
<td>juichen</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2.357143</td>
<td>bitter</td>
<td>lekker</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4.642857</td>
<td>vechten</td>
<td>schieten</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10.000000</td>
<td>ademen</td>
<td>ademen</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>4.285714</td>
<td>bijten</td>
<td>zombie</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>5.785714</td>
<td>zoemen</td>
<td>bij</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1.285714</td>
<td>fluisteren</td>
<td>zee</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>6.642857</td>
<td>walgen</td>
<td>vies</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>0.785714</td>
<td>langzaam</td>
<td>lekker</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>10.000000</td>
<td>auto</td>
<td>auto</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>10.000000</td>
<td>eten</td>
<td>eten</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>5.285714</td>
<td>ei</td>
<td>eten</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>1.142857</td>
<td>zwemmen</td>
<td>waaien</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>0.500000</td>
<td>snel</td>
<td>waterslang</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p><br> Now we can merge it with the cosine similarity dataframe</p>
<div id="ad41bdb8" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load in similarity</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_similarity <span class="op">=</span> pd.read_csv(datafolder <span class="op">+</span> <span class="st">'conceptnet_clean.csv'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># merge df_survey_means with df on English and answer_en</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> pd.merge(df_similarity, df_survey_means, on<span class="op">=</span>[<span class="st">'word'</span>, <span class="st">'answer'</span>], how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of English 'to beat'</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df_final[df_final[<span class="st">'English'</span>] <span class="op">!=</span> <span class="st">'beat'</span>]</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># and to weep</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df_final[df_final[<span class="st">'English'</span>] <span class="op">!=</span> <span class="st">'weep'</span>]</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># save it</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>df_final.to_csv(datafolder <span class="op">+</span> <span class="st">'/df_final_conceptnet.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>df_final.head(<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">word</th>
<th data-quarto-table-cell-role="th">answer</th>
<th data-quarto-table-cell-role="th">exp</th>
<th data-quarto-table-cell-role="th">English</th>
<th data-quarto-table-cell-role="th">answer_en</th>
<th data-quarto-table-cell-role="th">cosine_similarity</th>
<th data-quarto-table-cell-role="th">mean_similarity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>bloem</td>
<td>feest</td>
<td>1</td>
<td>flower</td>
<td>party</td>
<td>0.135571</td>
<td>1.785714</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>dansen</td>
<td>juichen</td>
<td>1</td>
<td>to dance</td>
<td>to cheer</td>
<td>0.177888</td>
<td>3.214286</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>bitter</td>
<td>lekker</td>
<td>1</td>
<td>bitter</td>
<td>tasty</td>
<td>0.257505</td>
<td>2.357143</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>vechten</td>
<td>schieten</td>
<td>1</td>
<td>to fight</td>
<td>to shoot</td>
<td>0.205791</td>
<td>4.642857</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>ademen</td>
<td>ademen</td>
<td>1</td>
<td>to breathe</td>
<td>to breathe</td>
<td>1.000000</td>
<td>10.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>bijten</td>
<td>zombie</td>
<td>1</td>
<td>to bite</td>
<td>zombie</td>
<td>0.068596</td>
<td>4.285714</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>zoemen</td>
<td>bij</td>
<td>1</td>
<td>buzz</td>
<td>bee</td>
<td>0.164508</td>
<td>5.785714</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>fluisteren</td>
<td>zee</td>
<td>1</td>
<td>to whisper</td>
<td>sea</td>
<td>0.072605</td>
<td>1.285714</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>walgen</td>
<td>vies</td>
<td>1</td>
<td>disgusted</td>
<td>dirty</td>
<td>0.353700</td>
<td>6.642857</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>langzaam</td>
<td>lekker</td>
<td>1</td>
<td>slow</td>
<td>tasty</td>
<td>0.077073</td>
<td>0.785714</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>auto</td>
<td>auto</td>
<td>1</td>
<td>car</td>
<td>car</td>
<td>1.000000</td>
<td>10.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>eten</td>
<td>eten</td>
<td>1</td>
<td>to eat</td>
<td>to eat</td>
<td>1.000000</td>
<td>10.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>ei</td>
<td>eten</td>
<td>1</td>
<td>egg</td>
<td>to eat</td>
<td>0.233187</td>
<td>5.285714</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>zwemmen</td>
<td>waaien</td>
<td>1</td>
<td>to swim</td>
<td>to blow</td>
<td>0.065727</td>
<td>1.142857</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>snel</td>
<td>waterslang</td>
<td>1</td>
<td>fast</td>
<td>hose</td>
<td>0.081750</td>
<td>0.500000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p><br> Now we can finally run correlation</p>
<div id="480d2542" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get rid of all lines where mean_similarity is 10.0 - otherwise we will drag the correlation up</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df_corr <span class="op">=</span> df_final[df_final[<span class="st">'mean_similarity'</span>] <span class="op">!=</span> <span class="fl">10.0</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>feature1 <span class="op">=</span> <span class="st">"cosine_similarity"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>feature2 <span class="op">=</span> <span class="st">"mean_similarity"</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># create a sub-dataframe with the selected features, dropping missing values</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>subdf <span class="op">=</span> df_corr[[feature1, feature2]].dropna()</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># compute the correlation coefficient, with Bayes factor</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>corr_with_bf <span class="op">=</span> pingouin.pairwise_corr(subdf, columns<span class="op">=</span>[<span class="st">'cosine_similarity'</span>, <span class="st">'mean_similarity'</span>], method<span class="op">=</span><span class="st">'pearson'</span>, alternative<span class="op">=</span><span class="st">'two-sided'</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(corr_with_bf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   X                Y   method alternative    n         r  \
0  cosine_similarity  mean_similarity  pearson   two-sided  122  0.730051   

         CI95%         p-unc       BF10  power  
0  [0.63, 0.8]  1.430306e-21  3.728e+18    1.0  </code></pre>
</div>
</div>
<p><br> And here we see the relationship visually</p>
<div id="33c4c4ca" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ConceptNet_similarity_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The strong correlation (r=0.73) validates the use of ConceptNet embeddings as a measure of conceptual similarity. In the <a href="../07_TS_featureExtraction/TS_extraction.html#sec-features">next script</a>, we will load it in together with our effort features.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-speer_etal18" class="csl-entry" role="listitem">
Speer, Robyn, Joshua Chin, and Catherine Havasi. 2018. <span>“<span>ConceptNet</span> 5.5: <span>An Open Multilingual Graph</span> of <span>General Knowledge</span>.”</span> 2018. <a href="https://doi.org/10.48550/arXiv.1612.03975">https://doi.org/10.48550/arXiv.1612.03975</a>.
</div>
</div>
</section>

</main> <!-- /main -->
document.addEventListener("DOMContentLoaded", function () {

  const links = document.querySelectorAll("a[href^='http']");

  links.forEach(function (link) {

    // Only apply to external links

    if (link.hostname !== window.location.hostname) {

      link.setAttribute("target", "_blank");

      link.setAttribute("rel", "noopener noreferrer");

    }

  });

});
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>